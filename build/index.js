"use strict";const k=Math.PI,da=t=>t<0?-t:t,ea=(t,i)=>t<i?t:i,ha=(t,i)=>i<t?t:i,ia=(t,i=0,s=1)=>t<i?i:s<t?s:t,ja=(t,i=0,s=1)=>s-i?ia((t-i)/(s-i)):0,ka=(t,i=0,s=1)=>i+ia(t)*(s-i),la=(t,i,s,a)=>2*da(t.x-s.x)<i.x+a.x&2*da(t.y-s.y)<i.y+a.y,r=(t=1,i=0)=>i+(t-i)*Math.random(),ma=(t=1,i=0)=>0|r(t,i),qa=(t=1)=>0<t?pa(t*r(0/t,1)**.5):new v,pa=(t=1)=>ra(new v,r(2*k),t),ua=(t=new x,i=new x(0,0,0,1),s)=>s?t.ea(i,r()):new x(r(t.r,i.r),r(t.m,i.m),r(t.b,i.b),r(t.a,i.a)),B=(t=0,i)=>null==t.x?new v(t,null==i?t:i):new v(t.x,t.y);function ra(t,i=0,s=1){return t.x=s*Math.sin(i),t.y=s*Math.cos(i),t}function va(t,i){return(t.x-i.x)**2+(t.y-i.y)**2}function wa(t){var i=t.length();return 1<i?t.scale(1/i):t}function xa(t,i){return 0<=t.x&&0<=t.y&&t.x<i.x&&t.y<i.y}class v{constructor(t=0,i=0){this.x=t,this.y=i}F(){return new v(this.x,this.y)}add(t){return new v(this.x+t.x,this.y+t.y)}v(t){return new v(this.x-t.x,this.y-t.y)}multiply(t){return new v(this.x*t.x,this.y*t.y)}ab(t){return new v(this.x/t.x,this.y/t.y)}scale(t){return new v(this.x*t,this.y*t)}length(){return(this.x**2+this.y**2)**.5}normalize(t=1){var i=this.length();return i?this.scale(t/i):new v(0,t)}angle(){return Math.atan2(this.x,this.y)}rotate(t){var i=Math.cos(t);return t=Math.sin(t),new v(this.x*i-this.y*t,this.x*t+this.y*i)}direction(){return da(this.x)>da(this.y)?this.x<0?3:1:this.y<0?2:0}floor(){return new v(Math.floor(this.x),Math.floor(this.y))}ea(t,i){return this.add(t.v(this).scale(ia(i)))}toString(t=3){return`(${(this.x<0?"":" ")+this.x.toFixed(t)},${(this.y<0?"":" ")+this.y.toFixed(t)} )`}}function Aa(t=0){var i=new x,s=(t,i,s)=>(s=(s%1+1)%1)<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+(i-t)*(2/3-s)*6:t;return i.r=s(1.4-1,1,t+1/3),i.m=s(1.4-1,1,t),i.b=s(1.4-1,1,t-1/3),i.a=1,i}function Ba(t){return(255*t.r|0)+(255*t.m<<8)+(255*t.b<<16)+(255*t.a<<24)}class x{constructor(t=1,i=1,s=1,a=1){this.r=t,this.m=i,this.b=s,this.a=a}F(){return new x(this.r,this.m,this.b,this.a)}add(t){return new x(this.r+t.r,this.m+t.m,this.b+t.b,this.a+t.a)}v(t){return new x(this.r-t.r,this.m-t.m,this.b-t.b,this.a-t.a)}multiply(t){return new x(this.r*t.r,this.m*t.m,this.b*t.b,this.a*t.a)}ab(t){return new x(this.r/t.r,this.m/t.m,this.b/t.b,this.a/t.a)}scale(t,i=t){return new x(this.r*t,this.m*t,this.b*t,this.a*i)}ea(t,i){return this.add(t.v(this).scale(ia(i)))}toString(){return`rgb(${255*this.r|0},${255*this.m|0},${255*this.b|0},${this.a})`}}function Ca(t){return null!=t.time?ja(t.time-Ia,t.setTime,0):0}class Ja{constructor(t){this.time=null==t?void 0:Ia+t,this.setTime=t}set(t=0){this.time=Ia+t,this.setTime=t}active(){return Ia<=this.time}get(){return null!=this.time?Ia-this.time:0}toString(){}}let Ka=B(1920,1200),La=B(),Qa=B(16),Ra=B(1),Sa=0,C=B(),G=ha(Qa.x,Qa.y);const Ta=1/60;let Ua=[],Va=[],Wa=0,Ia=0,Ya=0,bb=0,cb=0,db,eb;function fb(t,a,e,h,n,i){gb.onerror=gb.onload=()=>{eb=B(.3).ab(db=B(gb.width,gb.height)),document.body.style="margin:0;overflow:hidden;background:#000;touch-action:none;user-select:none;-webkit-user-select:none;-moz-user-select:none",document.body.appendChild(K=document.createElement("canvas")),hb=K.getContext("2d"),K.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",ib(),document.body.appendChild(L=document.createElement("canvas")),N=L.getContext("2d"),L.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",t(),r()};const r=(t=0)=>{var i=t-bb;for(bb=t,Ya+=i/1e3,cb=ea(cb+i,50),La.x?(L.width=K.width=La.x,L.height=K.height=La.y,t=innerWidth/innerHeight,i=K.width/K.height,K.style.width=L.style.width=t<i?"100%":"",K.style.height=L.style.height=t<i?"":"100%",jb&&(jb.style.width=K.style.width,jb.style.height=K.style.height)):(L.width=K.width=ea(innerWidth,Ka.x),L.height=K.height=ea(innerHeight,Ka.y)),kb=B(K.width,K.height),t=0,cb<0&&-9<cb&&(t=cb,cb=0);0<=cb;cb-=1e3/60)document.hasFocus()||(Q=[[]]),lb=pb(qb),rb(),a(),sb(),e(),tb();cb+=t,ub(),h(),Ua.sort((t,i)=>t.P-i.P);for(const s of Ua)s.V||s.aa();n(),vb(),wb(),requestAnimationFrame(r)};i?gb.src=i:gb.onload()}function ub(){kb=B(K.width,K.height),hb.imageSmoothingEnabled=!1;var t=K.width,i=K.height,s=C.x,a=C.y,e=G;T.viewport(0,0,jb.width=t,jb.height=i),T.clear(16384),T.bindTexture(3553,zb),T.useProgram(Ab),Eb=void 0,t=2*e/t,i=2*e/i,T.uniformMatrix4fv(T.getUniformLocation(Ab,"m"),0,new Float32Array([t,0,0,0,0,i,0,0,1,1,-1,1,-1-t*s,-1-i*a,0,0]))}function sb(){Va=Ua.filter(t=>t.Xa);const s=t=>{if(!t.V){t.update();for(const i of t.children)s(i)}};for(const t of Ua)t.parent||s(t);Ua=Ua.filter(t=>!t.V),Ia=++Wa/60}function Fb(t){if(!t.V){t.V=1,t.parent&&t.parent.removeChild(t);for(const i of t.children)Fb(i,i.parent=0)}}function Gb(t,i,s=B(),a=0){i.parent||t.children.includes(i),t.children.push(i),i.parent=t,i.fa=s.F(),i.lb=a}class Hb{constructor(t=B(),i=Ra,s=-1,a=Qa,e=0,h,n=0){this.g=t.F(),this.size=i,this.W,this.o=s,this.u=a,this.angle=e,this.color=h,this.Ba,this.i=1,this.ma=this.I=.99,this.A=0,this.Ma=.8,this.Y=1,this.P=n,this.h=new v,this.Ca=0,this.sb=Ia,this.children=[],this.ba=1,Ua.push(this)}update(){var t=this.parent;if(t)this.g=this.fa.multiply(B(t.J?-1:1,1)).rotate(-t.angle).add(t.g),this.angle=(t.J?-1:1)*this.lb+t.angle;else if(this.h.x=ia(this.h.x,-1,1),this.h.y=ia(this.h.y,-1,1),t=this.g.F(),this.g.x+=this.h.x*=this.I,this.g.y+=this.h.y=this.I*this.h.y+Sa*this.Y,this.angle+=this.Ca*=this.ma,this.i){var i,s,a,e,h,n,r,c=this.h.y<0;if(this.Z&&(i=this.Z.h?this.Z.h.x:0,this.h.x=i+(this.h.x-i)*this.Ma,this.Z=0),this.Xa)for(var o of Va)!this.kb&!o.kb||o.V||o.parent||o==this||la(this.g,this.size,o.g,o.size)&&(la(t,this.size,o.g,o.size)?(i=(s=(i=t.v(o.g)).length())<.01?pa(.001):i.scale(.001/s),this.h=this.h.add(i),o.i&&(o.h=o.h.v(i))):(i=this.size.add(o.size),s=2*(t.y-o.g.y)>i.y+Sa,a=2*da(t.y-o.g.y)<i.y,e=2*da(t.x-o.g.x)<i.x,!s&&!e&&a||(this.g.y=o.g.y+(i.y/2+.001)*(t.y-o.g.y<0?-1:1),o.Z&&c||!o.i?(c&&(this.Z=o),this.h.y*=-this.A):o.i&&(h=(this.i*this.h.y+o.i*o.h.y)/(this.i+o.i),n=o.h.y*(o.i-this.i)/(this.i+o.i)+2*this.h.y*this.i/(this.i+o.i),r=ha(this.A,o.A),this.h.y=ka(r,h,this.h.y*(this.i-o.i)/(this.i+o.i)+2*o.h.y*o.i/(this.i+o.i)),o.h.y=ka(r,h,n))),s||!a&&e||(this.g.x=o.g.x+(i.x/2+.001)*(t.x-o.g.x<0?-1:1),o.i?(i=(this.i*this.h.x+o.i*o.h.x)/(this.i+o.i),s=o.h.x*(o.i-this.i)/(this.i+o.i)+2*this.h.x*this.i/(this.i+o.i),a=ha(this.A,o.A),this.h.x=ka(a,i,this.h.x*(this.i-o.i)/(this.i+o.i)+2*o.h.x*o.i/(this.i+o.i)),o.h.x=ka(a,i,s)):this.h.x*=-this.A)));this.ba&&Ib(this.g,this.size,this)&&!Ib(t,this.size,this)&&(o=Ib(new v(this.g.x,t.y),this.size,this),!Ib(new v(t.x,this.g.y),this.size,this)&&o||(this.Z=c,this.h.y*=-this.A,(c=(t.y-this.size.y/2|0)-(t.y-this.size.y/2))<0&&c>this.I*this.h.y+Sa*this.Y&&(this.h.y=this.I?(c-Sa*this.Y)/this.I:0),this.g.y=t.y),o&&(this.g.x=t.x,this.h.x*=-this.A))}}aa(){Jb(this.g,this.W||this.size,this.o,this.u,this.color,this.angle,this.J,this.Ba)}removeChild(t){t.parent==this&&this.children.includes(t),this.children.splice(this.children.indexOf(t),1),t.parent=0}toString(){}}const gb=new Image;let K,hb,L,N,kb=B();const pb=t=>t.add(B(.5)).v(kb.scale(.5)).multiply(B(1/G,-1/G)).add(C),Kb=t=>t.v(C).multiply(B(G,-G)).add(kb.scale(.5)).v(B(.5));function Jb(t,i=B(1),s=-1,a=Qa,e=new x,h=0,n,r=new x(0,0,0,0)){var c,o,b;s<0||!gb.width?Lb(t.x,t.y,i.x,i.y,h,0,0,0,0,0,Ba(e)):(b=s%(c=db.x/a.x|0)*(o=a.x/db.x),s=(s/c|0)*(a=a.y/db.y),Lb(t.x,t.y,n?-i.x:i.x,i.y,h,b+eb.x,s+eb.y,b-eb.x+o,s-eb.y+a,Ba(e),Ba(r)))}function Mb(t,i=B(1),s){var a=Qa;Jb(pb(t),i.scale(1/G),-1,a,s,void 0,0,0)}function Nb(t,i){var s=B(.055),a=hb;t=Kb(t),s=s.scale(G),a.save(),a.translate(t.x+.5|0,t.y-.5|0),a.rotate(0),a.scale(s.x,s.y),i(a),a.restore()}function Ob(t,i,s=1,a=new x,e=0,h=new x(0,0,0),n="center"){N.fillStyle=a,N.lineWidth=e,N.strokeStyle=h,N.textAlign=n,N.font=s+"px arial",N.textBaseline="middle",N.lineJoin="round",i=i.F(),(t+"").split("\n").forEach(t=>{e&&N.strokeText(t,i.x,i.y),N.fillText(t,i.x,i.y),i.y+=s})}let Pb;function Qb(r,t,c,o=4){const b=r.context,l=(b.save(),b.imageSmoothingEnabled=!1,r.u),u=l.add(r.uc).scale(o),d=r.image.width/r.u.x|0;t.split("\n").forEach((i,s)=>{var a=i.length*l.x*o/2|0;for(let t=i.length;t--;){((e=i[t].charCodeAt())<32||127<e)&&(e=127);var e=(h=r.Dc+e-32)%d,h=h/d|0,n=c.add(B(t,s).multiply(u));b.drawImage(r.image,e*l.x,h*l.y,l.x,l.y,n.x-a,n.y,l.x*o,l.y*o)}}),b.restore()}function Rb(t,i,s,a=1){Qb(t,i,Kb(s).floor(),a*G|0)}class Sb{constructor(){var t=B(8),i=B(0,1),s=N;Pb||((Pb=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC"),this.image=Pb,this.u=t,this.uc=i,this.Dc=0,this.context=s}}const Tb=(t,i=0)=>Q[i]&&1&Q[i][t]?1:0;let lb=B(),qb=B(),Ub=0,Vb=0;const Wb=(t,i=0)=>Tb(t,i+1);let Q=[[]];function tb(){for(const t of Q)for(const i in t)t[i]&=1;Ub=0}onkeydown=t=>{t.repeat||(Q[Vb=0][Xb(t.keyCode)]=3)},onkeyup=t=>{Q[0][Xb(t.keyCode)]=4};const Xb=t=>87==t?38:83==t?40:65==t?37:68==t?39:t,Yb=(onmousedown=t=>{Q[Vb=0][t.button]=3,onmousemove(t),t.button&&t.preventDefault()},onmouseup=t=>Q[0][t.button]=2&Q[0][t.button]|4,onmousemove=t=>{var i;return t=K?(i=K.getBoundingClientRect(),B(K.width,K.height).multiply(B(ja(t.x,i.left,i.right),ja(t.y,i.top,i.bottom)))):B(),qb=t},onwheel=t=>t.ctrlKey||(Ub=t.deltaY<0?-1:1),oncontextmenu=()=>!1,[]);function rb(){if(navigator.getGamepads&&document.hasFocus()){var i=navigator.getGamepads();for(let t=i.length;t--;){var s=i[t];const h=Q[t+1]||(Q[t+1]=[]),n=Yb[t]||(Yb[t]=[]);if(s){for(var a=t=>.3<t?ja(t,.3,.8):t<-.3?-ja(-t,.3,.8):0,e=0;e<s.axes.length-1;e+=2)n[e>>1]=wa(B(a(s.axes[e]),a(-s.axes[e+1])));for(a=s.buttons.length;a--;)e=s.buttons[a],h[a]=e.pressed?1+2*!Wb(a,t):4*Wb(a,t),Vb|=!t&&e.pressed;(s=B(Wb(15,t)-Wb(14,t),Wb(12,t)-Wb(13,t))).x**2+s.y**2&&(n[0]=wa(s))}}}}if(void 0!==window.ontouchstart){let s,a;ontouchstart=ontouchmove=ontouchend=t=>{t.button=0;var i=t.touches.length;return i?(a||Zb([cc(...[0,a=1])]),t.x=t.touches[0].clientX,t.y=t.touches[0].clientY,(s?onmousemove:onmousedown)(t)):s&&onmouseup(t),s=i,!t.cancelable}}class dc{constructor(t,i=30,s=.7){this.yc=i,this.Ec=s,this.Oa=t[1]||0,t[1]=0,this.Eb=cc(...t)}play(t,i=1,s=1,a=1){var e=0;if(t){if(e=this.yc){var h=va(C,t);if(e*e<h)return;i*=ja(h**.5,e,e*this.Ec)}e=2*Kb(t).x/K.width-1}return Zb([this.Eb],i,s+s*this.Oa*a*r(-1,1),e)}}let ec;function Zb(t,i=1,s=1,a=0){var e,h;if((ec=ec||new(window.AudioContext||webkitAudioContext)).resume(),"running"==ec.state)return e=ec.createBuffer(t.length,t[0].length,44100),h=ec.createBufferSource(),t.forEach((t,i)=>e.getChannelData(i).set(t)),h.buffer=e,h.playbackRate.value=s,h.loop=0,(t=ec.createGain()).gain.value=.5*i,t.connect(ec.destination),(window.StereoPannerNode?h.connect(new StereoPannerNode(ec,{pan:ia(a,-1,1)})):h).connect(t),h.start(),h}function cc(t=1,i=.05,s=220,a=0,e=0,h=.1,n=0,c=1,o=0,b=0,l=0,u=0,d=0,x=0,g=0,f=0,y=0,v=1,m=0,w=0){let p=2*k,B=o*=500*p/44100/44100,A=[],T=(i=s*=(1+i*r(-1,1))*p/44100,0),M=0,C=0,W=1,z=0,j=0,K=0,I,S;for(b*=500*p/44100**3,g*=p/44100,l*=p/44100,u*=44100,d=44100*d|0,S=(a=44100*a+9)+(m*=44100)+(e*=44100)+(h*=44100)+(y*=44100)|0;C<S;A[C++]=K)++j%(100*f|0)||(K=n?1<n?2<n?3<n?Math.sin((T%p)**3):ha(ea(Math.tan(T),1),-1):1-(2*T/p%2+2)%2:1-4*da(Math.round(T/p)-T/p):Math.sin(T),K=(d?1-w+w*Math.sin(p*C/d):1)*(K<0?-1:1)*(K<0?-K:K)**c*t*.5*(C<a?C/a:C<a+m?1-(C-a)/m*(1-v):C<a+m+e?v:C<S-y?(S-C-y)/h*v:0),K=y?K/2+(y>C?0:(C<S-y?1:(S-C)/y)*A[C-y|0]/2):K),I=(s+=o+=b)*Math.cos(g*M++),T+=I-I*x*(1-1e9*(Math.sin(C)+1)%2),W&&++W>u&&(s+=l,i+=l,W=0),!d||++z%d||(s=i,o=B,W=W||1);return A}let fc=[],V=B();function gc(t){for(V=t,t=(fc=[]).length=da(V.x*V.y);t--;)fc[t]=0}function Ib(t,i=B(),s){var a=ha(t.x-i.x/2|0,0),e=ha(t.y-i.y/2|0,0),h=ea(t.x+i.x/2,V.x);for(t=ea(t.y+i.y/2,V.y);e<t;++e)for(i=a;i<h;++i){var n=fc[e*V.x+i];if(n&&(!s||0<n))return 1}}class hc{constructor(t,i=0,s=0,a=new x){this.Ra=t,this.direction=i,this.J=s,this.color=a}clear(){this.Ra=this.direction=this.J=0,color=new x}}function ic(t,i){var s=i.floor().add(t.g).add(B(.5));jc(t,s,t=>t.clearRect(-.5,-.5,1,1)),null!=(i=t.getData(i)).Ra&&Jb(s,B(1),i.Ra,t.u,i.color,i.direction*k/2,i.J)}function jc(t,i,s){var a=B(1);const e=t.context;e.save(),i=i.v(t.g).multiply(t.u),a=a.multiply(t.u),e.translate(i.x,t.canvas.height-i.y),e.rotate(0),e.scale(a.x,a.y),s(e),e.restore()}class kc extends Hb{constructor(t=V){var i=B(1);for(super(B(),t,-1,Qa,0,void 0,0),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.scale=i,this.dc,this.data=[],t=this.size,t=da(t.x*t.y);t--;)this.data.push(new hc)}setData(t,i,s){xa(t,this.size)&&(this.data[(0|t.y)*this.size.x+t.x|0]=i,s&&ic(this,t))}getData(t){return xa(t,this.size)&&this.data[(0|t.y)*this.size.x+t.x|0]}update(){}aa(){var t=Kb(this.g.add(B(0,this.size.y*this.scale.y)));(this.dc?N:hb).drawImage(this.canvas,t.x,t.y,G*this.size.x*this.scale.x,G*this.size.y*this.scale.y)}}function lc(t){var i=null!=t.Ha.x?new v(r(-.5,.5),r(-.5,.5)).multiply(t.Ha).rotate(t.angle):qa(.5*t.Ha),i=new mc(t.g.add(i),t.o,t.u,t.angle+r(t.pb,-t.pb));const s=t.Oa;var a=(c=t=>t+t*r(s,-s))(t.wc),e=c(t.Qa),h=c(t.Bc),n=c(t.speed),c=c(t.wb)*(2*(0|r(2))-1);const o=r(t.bb,-t.bb),b=ua(t.Ib,t.Jb,t.rb),l=ua(t.Gb,t.Hb,t.rb);i.oa=b,i.na=l.v(b),i.h=ra(new v,t.angle+o,n),i.Ca=c,i.jc=a,i.Qa=e,i.Cc=h-e,i.Ka=t.Ka,i.I=t.I,i.ma=t.ma,i.A=t.A,i.Ma=t.Ma,i.Y=t.Y,i.ba=t.ba,i.la=t.la,i.P=t.P,i.ha=t.ha,i.J=r()<.5,i.$a=t.Pc,t.vc&&t.vc(i)}class nc extends Hb{constructor(t,i,s=0,a=0,e=100,h=k,n=-1,r=Qa,c=new x,o=new x,b=new x(1,1,1,0),l=new x(1,1,1,0),u=.5,d=.1,g=1,f=.1,y=.05,m=1,w=1,p=0,B=k,A=.1,T=.2,M,C,W=1,z=C?1e9:0){super(t,new v,n,r,i,void 0,z),this.Ha=s,this.cb=a,this.ra=e,this.bb=h,this.Ib=c,this.Jb=o,this.Gb=b,this.Hb=l,this.rb=W,this.wc=u,this.Qa=d,this.Bc=g,this.speed=f,this.wb=y,this.I=m,this.ma=w,this.Y=p,this.pb=B,this.Ka=A,this.Oa=T,this.ba=M,this.la=C,this.ca=this.ha=0}update(){if(this.parent&&super.update(),!this.cb||Ia-this.sb<=this.cb){if(+this.ra){var t=1/this.ra;for(this.ca+=Ta;0<this.ca;this.ca-=t)lc(this)}}else Fb(this)}aa(){}}class mc extends Hb{constructor(t,i,s,a){super(t,new v,i,s,a)}aa(){var t=ea((Ia-this.sb)/this.jc,1),i=this.Qa+t*this.Cc,i=new v(i,i),s=this.Ka/2,s=new x(this.oa.r+t*this.na.r,this.oa.m+t*this.na.m,this.oa.b+t*this.na.b,(this.oa.a+t*this.na.a)*(t<s?t/s:1-s<t?(1-t)/s:1));if(this.la&&(Eb=1),this.ha){var a=this.h.length();const e=this.h.scale(1/a);a*=this.ha,i.y=ha(i.x,a),this.angle=e.angle(),Jb(this.g.add(e.multiply(B(0,-a/2))),i,this.o,this.u,s,this.angle,this.J)}else Jb(this.g,i,this.o,this.u,s,this.angle,this.J);this.la&&(Eb=void 0),1==t&&(this.color=s,this.size=i,this.$a&&this.$a(this),this.V=1)}}let oc=[],pc;function vb(){var t,i;oc.length&&(t=oc[0],i=Ya-pc,pc?5<i?oc.shift(pc=0):t.aa():pc=Ya)}let jb,T,zb,Ab,W,Z,qc,rc,Eb;function ib(){jb=document.createElement("canvas"),T=jb.getContext("webgl",{antialias:!1}),jb.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",zb=sc(),document.body.appendChild(jb),Ab=tc();var t=new ArrayBuffer(9437184);uc(t.byteLength),W=new Float32Array(t),Z=new Uint32Array(t);let h=qc=0;(t=(t,i,s,a,e=0)=>{t=T.getAttribLocation(Ab,t),T.enableVertexAttribArray(t),T.vertexAttribPointer(t,a,i,e,24,h),h+=a*s})("p",5126,4,2),t("t",5126,4,2),t("c",5121,1,4,1),t("a",5121,1,4,1)}function vc(t,i){return i=T.createShader(i),T.shaderSource(i,t),T.compileShader(i),i}function tc(){var t=T.createProgram();return T.attachShader(t,vc("precision highp float;uniform mat4 m;attribute vec2 p,t;attribute vec4 c,a;varying vec2 v;varying vec4 d,e;void main(){gl_Position=m*vec4(p,1,1);v=t;d=c;e=a;}",35633)),T.attachShader(t,vc("precision highp float;varying vec2 v;varying vec4 d,e;uniform sampler2D s;void main(){gl_FragColor=texture2D(s,v)*d+e;}",35632)),T.linkProgram(t),t}function uc(t){var i=T.createBuffer();T.bindBuffer(34962,i),T.bufferData(34962,t,35048)}function sc(){var t,i=gb;if(i&&i.width)return t=T.createTexture(),T.bindTexture(3553,t),T.texImage2D(3553,0,6408,6408,5121,i),T.texParameteri(3553,10241,9728),T.texParameteri(3553,10240,9728),T.texParameteri(3553,10242,33071),T.texParameteri(3553,10243,33071),t}function wc(){var t;qc&&(t=rc?1:771,T.blendFuncSeparate(770,t,1,t),T.enable(3042),T.bufferSubData(34962,0,W.subarray(0,36*qc)),T.drawArrays(4,0,6*qc),qc=0,rc=Eb)}function wb(t){var i=hb;(qc||t)&&(wc(),t&&i.drawImage(jb,0,0))}function Lb(t,i,s,a,e,h,n,r,c,o=4294967295,b=0){65536!=qc&&rc==Eb||wc();var l=Math.cos(e)/2,u=Math.sin(e)/2;e=l*s,l*=a,s*=u,a*=u,u=36*qc++,W[u++]=t-e-a,W[u++]=i-l+s,W[u++]=h,W[u++]=c,Z[u++]=o,Z[u++]=b,W[u++]=t+e+a,W[u++]=i+l-s,W[u++]=r,W[u++]=n,Z[u++]=o,Z[u++]=b,W[u++]=t-e+a,W[u++]=i+l+s,W[u++]=h,W[u++]=n,Z[u++]=o,Z[u++]=b,W[u++]=t-e-a,W[u++]=i-l+s,W[u++]=h,W[u++]=c,Z[u++]=o,Z[u++]=b,W[u++]=t+e-a,W[u++]=i-l-s,W[u++]=r,W[u++]=c,Z[u++]=o,Z[u++]=b,W[u++]=t+e+a,W[u++]=i+l-s,W[u++]=r,W[u++]=n,Z[u++]=o,Z[+u]=b}!function(){function M(t){return Math.max(Math.min(Math.round(t),24),0)}function W(t){t.za=M(t.x+t.R/2),t.Aa=M(t.y+t.S/2),t.eb=M(t.x+t.R),t.sa=M(t.y+t.S)}function i(t){var i=t?255*t.r:w(180)+20,s=t?255*t.m:w(180)+20,a=(t=t?255*t.b:w(180)+20,w(6,24*.6)),e=w(6,24*.6),h=w(5,24*.6),n=w(0,24-h-2),r=w(6,12),c=w(8,24*.6),o=w(0,24-r-24*.2),b=w(1,3),l=w(1,3),u=w(2,r-4),d=w(1,.5*c),x=w(3,c-4),g=w(1,2),f=w(2,r-u-g),y=w(-4,-1),v=w(-4,3),m=Math.min(a/2,w(1,6));return{yb:[i-20,s-20,t-10],xb:[i-40,s-40,t-20],Vb:[i,s,t],Mb:0===w(2)?[0,0,0]:[200,200,200],$b:c,Yb:r,Zb:o,Db:a,Bb:e,Ab:h,Cb:n,Qb:b,Ob:l,Pb:u,Nb:d,tc:x,rc:g,sc:f,Wb:y,Ic:v,fc:2,ic:m}}function s(a){var e;if(a)return e=i(),Object.keys(e).forEach(t=>{var s,i;0<w(20)&&(e[t]=(s=t,"number"==typeof(i=(t=a)[0][s])?(t=t.reduce((t,i)=>((i=i[s])<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i),t),[1/0,-1/0]),w(t[0],t[1])):i))}),e}function z(t,i,s,a,e,h,n){var r=Math.floor((24-i)/2*n),c=24-r;return s-=r/2,[t,i,t+a,i,(e=Math.max(0,t+e+e*n))+h,s,t+a,c,t,c,e,s]}function a(t,a,i,s=4,e=0){Kb(a),t=i.yb;var h=i.xb,n=i.Vb,r=i.Mb,c=i.$b,o=i.Qb,b=i.Ob,l=i.Pb,u=i.Nb,d=i.tc,x=i.rc,g=i.sc,f=i.Wb,y=i.fc,v=i.ic,m=2<=s&&s<=6,w=[0,-.5,-1,-.5,0,.5,1,.5][s],p=[.5,.75,1,.75,.5,.25,0,.25][s],B=(s={x:(24-c)*p,y:i.Zb,R:c,S:i.Yb},(i.Db+i.Bb)/2),A=(i={x:(1-p+1)/3*(24-B),y:i.Cb,R:B,S:i.Ab},W(s),W(i),M(i.sa+(24-i.sa)/2)),T=(Math.sin(e)+1)/2;e=z(i.x,i.sa,A,v,f*=w,y,1-T),y=z(i.eb-v,i.sa,A,v,f,y,T),v=[s.za-c/4,s.Aa,s.za+c/4,s.Aa,i.za+B/4,i.Aa-1,i.za-B/4,i.Aa-1],o={x:(p=s.x+c*p)+(B=Math.max(1,u/2)),y:(u={x:p-B-o,y:s.y+l,R:o,S:b}).y,R:o,S:b},l={x:b=Math.max(p-d/2,s.x),y:s.y+l+g,R:Math.min(b+d,s.eb)-b,S:x},d=(i,n)=>{Nb(a,t=>{var s=t,a=-.5,e=-.5,h=i,t=n;s.fillStyle=j(t),s.beginPath(),h.forEach((t,i)=>{1!=i%2&&s[0===i?"moveTo":"lineTo"](Math.round(24*a+t),Math.round(24*e+h[i+1]))}),s.closePath(),s.fill()})},x=(i,s)=>{Nb(a,t=>{t.fillStyle=j(s),t.fillRect(Math.round(-12+i.x),Math.round(-12+i.y),Math.round(i.R),Math.round(i.S))})},m?(x(i,t),d(v,t),d(e,t),d(y,t),x(s,n),u.x>=s.x&&x(u,r),o.x<=s.x+c&&x(o,r),x(l,[0,0,0])):(x(s,h),d(v,t),d(e,t),d(y,t),x(i,t))}function j(t){return t?`rgb(${Math.max(0,Math.min(255,t[0]))},${Math.max(0,Math.min(255,t[1]))},`+Math.max(0,Math.min(255,t[2])):"#fff"}function e(i,s,a){const e=T*++S;J(i,s,a,e,0),[6,5,4,3,3,2,2,2,1,1,1,1,1].forEach(t=>{J(E(i,6),E(s,6),E(a,6),e+E(T-t),0+E(T-t),t,t)})}function t(s){return new Promise(t=>{const i=new Image;i.onload=()=>t(function(t){const i=t.createElement("canvas");return i.width=16*T,i.height=2*T,t.body.appendChild(i),I=i.getContext("2d"),i.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",I.drawImage(gb,1e3,1e3),J("f",0,0,0,0,12,12),J("f","f",0,12,12,12,12),e(2,4,3),e(2,4,2),e(3,4,3),e(4,3,3),I.fillStyle="#fff",I.font="20px serif","🔪 🩸 🍖 🌿 💕 ❕ 💢 💀 🍷 🍲".split(" ").forEach(t=>{I.fillText(t,T*++S-1,20)}),i.toDataURL()}(document)),s?i.src=s:i.onload()})}function h(){(F=D.Rc=new A).bc(),U=new Sb,C=V.scale(.5),G=42,Sa=0,(N=new nc(B(10,12),0,1,0,200,k,0,B(24),new x(1,1,1),new x(0,0,0),new x(1,1,1,0),new x(0,0,0,0),2,.2,.2,.1,.05,.99,1,.5,k,.05,.5,1,1)).A=.3,N.ha=2}function n(){var t=F.$;t!==D.$&&(D.$=t),Q[0]&&4&Q[0][13]&&(2===P||3===P?D.location.reload():0!==P&&2!==P||(P=1,F.pc())),t&&(D.Gc=d,C=C.ea(t.g,.1),t.C()?P=2:(24<=((t=t.Sb())?t.l:0)&&d.L(5),d.count()===d.length&&(P=3))),G=ia(G*(1-Ub/10),1,1e3)}function c(){}function o(){}function b(){const t=F.$,s=new x,i=L.width/2,a=L.height/2;if(2===P)Ob("YOU DIED",B(i,a-90),90,new x(1,0,0),4),Ob("Press Enter to restart",B(i,a),40,new x(1,.5,.5),4);else if(0===P)Rb(U,"BIT BUTCHER",C.add(B(0,3)),.2),Rb(U,"Press Enter to start",C.add(B(0,.5)),.1);else if(1===P||3===P&&t){var e=t,h=L.width/2,n=e.G[e.da];for(Rb(U,`${n?n.name:"Nothing"} equipped, 1-9: Equip item, E: Action`,pb(B(h,L.height-40)),2/G),n=1;n<=10;n++){const o=B(h-300+60*n,L.height-100);var r=n%10;Mb(o,B(50,70),r===e.da?new x(.9,.9,.9,.3):new x(.1,.1,.1,.3)),(r=e.G[r])&&(Ob(r.X,o.add(B(0,-6)),28),Rb(U,""+r.l,pb(o.add(B(5,14))),2/G))}d.forEach((t,i)=>Ob(`[${t[1]?"X":" "}] `+t[0],B(L.width-260,100+30*i),18,t[1]?new x(.4,1,.4,.5):s,4,new x(0,0,0,t[1]?.5:1),"left"));var c=85<t.H?0:1,c=new x(1,c,c,.8);Mb(B(i,40),B(Math.max(0,100-t.H)/100*500,2),c),Ob("Age: "+Math.ceil(t.H),B(i,40),20,c,4),3===P&&(Rb(U,"YOU WIN",C.add(B(0,5)),.2),Ob("Press Enter to play again",B(i,a-80),40,s,4))}}let l;const u=(t,i)=>{if(!dc)throw Error("no Sound");if(!(l=l||{hit:new dc([,,183,.03,.02,.09,,1.49,-1.8,,,,-.01,1.8,-1,.1,,.36,.08,.25]),attack:new dc([,,493,.01,.09,0,4,1.14,,,,,,,,.1,,.1,.01]),craft:new dc([,,7,.03,.28,.44,2,1.44,,-.3,20,.11,.04,,,.1,,.55,.29]),dud:new dc([.8,,112,,.07,.05,1,2.26,-.6,,,,,1.8,,.1,.2,.98,.1,.1]),powerup:new dc([,,1152,,.04,.17,,1.21,,,744,.08,,,,,,.91,.03]),pickup:new dc([1.05,,172,.02,,.17,2,.02,,,-409,.06,,,,.1,,.55,,.19]),walk:new dc([.2,.1,70,,,.01,4,,,,-9,.1,,,,,,.5]),consume:new dc([1.2,,16,.07,.18,.34,1,.38,-.1,-5.6,49,.15,.02,-.1,36,.1,,.39,.14])}))throw Error("no sounds");l[t]?l[t].play(i):console.warn("No sound",t,"in",l)};let d=[["Move (W,A,S,D or Arrows)"],["Pick up and equip knife"],["Stab animal"],["Breed animals"],["Make forbidden wine"],["Collect 24 meat"],["Eat a meaty meal"]],g=d;g.L=t=>{g[t][1]||u("powerup"),g[t][1]=(g[t][1]||0)+1},g.count=()=>g.reduce((t,i)=>t+(i[1]?1:0),0);const w=ma;class f extends Hb{constructor(t={}){var{g:t=B(),size:i=B(1),o:s=1,u:a,angle:e,j:h,qa:n=0,name:r=ma(999),s:c=0}=t;super(t,i,s,a,e),this.name=r,this.j=h,this.facing=k,this.direction=4,this.U=new Ja,this.s=c,this.qa=n,this.W=B(1)}setDirection(){this.direction=Math.round(this.facing<0?4+4*(k+this.facing)/k:4*this.facing/k)%8}pa(t){if(this.C()||this.U.active())return 0;this.U.set(1);for(var i of this.children)i.U&&i.U.set(1);return t=ha(this.s-t,0),i=this.s-t,(this.s=t)||this.xa(),i}C(){return!this.s}xa(){Fb(this)}update(){var t;super.update(),this.setDirection(),this.C()||null==this.U.time?this.Ba=new x(0,0,0,0):(t=.5*ja(this.U.get(),.15,0),this.Ba=new x(t,.1,.1,.5))}La(){return this.j.T.find(t=>t.ec&&!t.C())}}class y extends f{constructor(t){super(t),this.ka=new Ja,this.ga=new Ja,this.Na=new Ja(r(10)),this.Ua=new Ja,this.Ea=new Ja,this.Ja=null,this.M=new Ja,this.gb=new Ja,this.color=Aa(r()),this.Da=t.Da||null,this.species=t.species||s(this.Da)||i(this.color),this.P=10,this.s=2,this.nb=.14,this.mb=7,this.ob=1/0,this.hb=this.ub=!1,this.Xa=1,this.kb=0,this.ba=1,this.ja=this.Sa=this.H=0,this.ia=1,this.D=B(),this.O=B(),this.max=B(window.Ta),this.G=[,,,,,,,,,,],this.da=-1,this.K=this.B=null,Gb(this,this.Ia=new f({o:9})),this.Ia.fa=B(0,1.2),this.Pa(),Gb(this,this.Fa=new nc(B(),0,0,0,0,k,void 0,void 0,new x(1,.2,.2),new x(.5,.1,.1),new x(.4,.1,.1),new x(.4,.2,.2,.3),5,.2,.1,.07,.1,.95,.95,1,k,.01,.2,1),B(),0),this.Fa.A=.5}Pa(t){this.Ia.W=B(t?1:0),t&&(this.Ia.o={Lc:9,Mc:10,Hc:11,Kc:12}[t])}Fc(){var t,i;this.C()?this.Ja="dead":(t=-1*this.M.get(),i=-1*this.gb.get(),this.Ja=0<t&&i<t?"estrous":0<i?"fear":null),this.Pa(this.Ja)}pa(t,i){return(t=super.pa(t,i))<=0?0:(u("hit",this.g),i&&i.g&&(this.h=this.h.add(this.g.v(i.g).scale(r(.4,.8)))),this.Wa(),this.ga.time=void 0,t)}Wa(){this.Ea.active()||(this.Ea.set(this.C()?.5:.2),this.Fa.ra=100)}Fb(){this.Ea.active()||(this.Fa.ra=0)}Ub(s){var t=this.G.findIndex((t,i)=>t&&t.name===s&&(t.l||0)<(t.stack||0)&&0<i);return-1!==t?t:this.G.findIndex((t,i)=>!t&&0<i)}Sb(){var t=this.G.findIndex(t=>t&&"Meat"===t.name);return t<0?null:this.G[t]}ua(){return this.G[this.da]}qb(t){var i,s;"number"!=typeof i&&(i=this.Ub(t.name)),!t||i<1||9<i||((s=this.G[i])&&s.name===t.name&&(s.l||0)<(s.stack||0)?s.l=(s.l||0)+1:this.G[i]=t,u("pickup",this.g))}throw(){}Lb(t){t<-1||9<t||(this.da=t,(t=this.G[this.da])?("Butcher knife"===t.name&&d.L(1),this.B&&(this.B.W=B()),t.ta||(t.ta=new f(t),Gb(this,t.ta,B(-.2,.2))),this.B=t.ta):this.B=null)}jb(){var t=this.ua();if(t)return t.Va||0}attack(){u("attack",this.g)}ib(t=[],a){let e;return t.reduce((t,i)=>{var s=va(i.g,a)**.5;return s<t?(e=i,s):t},1/0),e}Tb(t=this.g){var i=this.j.T.filter(t=>!t.C()&&t!==this);const s=this.B;return i=i.filter(t=>la(t.g,t.size,s.g,s.size)),this.ib(i,t)}Rb(t=this.g){(t=this.Tb(t))&&(t.s+=1,t.M.set(10))}Za(t){const i=this.ua();"wine"===t?"Blood"!==i.name||i.l<10?u("dud",this.g):(i.l-=10,d.L(4),this.j.N("wine",this.g,2),u("craft")):"meal"===t&&("Meat"!==i.name||i.l<24?u("dud",this.g):(i.l-=24,this.j.N("meal",this.g,2),u("craft",this.g)))}Kb(t){t.l<=0||(--t.l,this.s+=1,this.H-=t.vb||0,"Meal"===t.name&&d.L(6),u("consume",this.g))}action(t){if(!this.ka.active()){var i=this.ua();if(this.ka.set(.25),i)return"w"===i.type?this.attack():i.Va?this.Rb(t):("Blood"===i.name&&this.Za("wine"),void("Meat"===i.name?this.Za("meal"):i.Ya&&this.Kb(i)))}}xc(){var t;this.Na.active()||(this.Na.set(r(2,20)),t=this.j.size.scale(.5),this.K=(30<va(this.g,t)**.5?t:this.g).add(B(r(-10,10),r(-10,10))),this.ia=r(1))}lc(){var t;this.ga.active()||(t=this.oc(),this.M.active()?this.nc():t||this.mc())}oc(){var t,i;return!this.ub||!(t=this.j.T.find(t=>t.Ac&&!t.C()&&!t.jb()&&t!==this))||(i=va(t.g,this.g)**.5)>this.mb?0:(this.ga.set((i=i<6)?.5:r(.5,2)),this.gb.set(1),i&&(t=this.g.v(t.g).normalize(7),this.K=this.g.add(t),this.ia=1),i)}mc(){var t,i;!this.hb||!(t=this.La())||(i=va(t.g,this.g)**.5)>this.mb||4<i||(i=t.ua())&&t.jb()&&(this.K=i.ta.g.add(ra(B(),r(2*k),r(1,2))))}nc(){var t;this.M.active()&&(this.ga.set(1),t=this.j.T.filter(t=>!t.C()&&t.M.active()&&t!==this),console.log(t),t.length&&(t=this.ib(t,this.g),console.log(t),t&&(la(t.g,t.size,this.g,this.size)?this.qc(t):this.K=t.g)))}qc(t){this.ga.set(5),t.M.time=void 0,this.M.time=void 0,d.L(3),this.j.ya(this.g,[this.species,t.species])}Xb(){this.Ua.active()||(this.Ua.set(2),this.H+=1,this.cc()&&this.pa(1,this))}cc(){return this.H>this.ob}kc(){var t,i;this.C()||((i=(t=this.O.F()).x||t.y)&&(this.Na.set(60),this.K=null,this.ia=1),this.lc(),this.xc(),this.D=this.h.F(),i?(t=t.scale(.04*this.ia),this.D=this.D.add(t)):this.K&&2<va(this.g,this.K)**.5&&(this.D=this.D.ea(this.K.v(this.g),.5)),t=this.nb*this.ia,this.D.x=ia(this.D.x,-t,t),this.D.y=ia(this.D.y,-t,t),this.h=B((this.h.x>t||this.h.x<-t?this.h:this.D).x,(this.h.y>t||this.h.y<-t?this.h:this.D).y),t=this.h.length(),this.Sa+=3.5*this.D.length(),this.ja+=.5*t,this.ja=.01<t?(this.ja%1+1)%1:0,this.facing=this.h.angle(),this.Xb())}update(){this.Fc(),this.kc(),this.Fb();const t=B(.9999);0===this.O.x&&(t.x=.9),0===this.O.y&&(t.y=.9),this.h=this.h.multiply(t),super.update()}aa(){let t=this.g;t=t.add(B(0,.05*Math.sin(this.ja*k))),a(hb,t,this.species,this.direction,this.Sa)}}class v extends y{constructor(t){super(t),this.ec=!0,this.s=5,this.nb=.2,this.P=10,this.H=18,this.ob=100}update(){[48,49,50,51,52,53,54,55,56,57].forEach(t=>{Tb(t)&&this.Lb(t-48)}),(Tb(81)||Wb(1))&&this.throw(),(Tb(69)||Tb(0)||Wb(0))&&this.action(lb),((this.O=Vb?Yb[0]&&Yb[0][0]||B():B(Tb(39)-Tb(37),Tb(38)-Tb(40)))&&this.O.x||this.O.y)&&d.L(0),this.Ac=!0,super.update();const t=this.B;var i;t&&(i=this.ka.active()?1:.7,t.W=B(this.ka.active()?1.2:1),t.fa=ra(B(),this.facing,i),i=B(),0===this.direction?i=B(.35,-.1):1===this.direction?i=B(.2,-.2):7===this.direction&&(i=B(-.2,-.1)),t.fa=t.fa.add(i),t.lb=this.facing+1.2*k,t.P=t.g.y<this.g.y?11:9)}}class m extends y{constructor(t){super(t),this.hb=this.ub=!0}xa(){u("hit",this.g),this.s=0,this.Wa(),this.Pa("dead"),setTimeout(()=>this.j.N("meat",this.g,1),500),setTimeout(()=>super.xa(),4e3)}update(){super.update();const t=this.La();!this.C()&&t&&t.B&&t.B.qa&&la(this.g,this.size,t.B.g,t.B.size)&&(d.L(2),this.pa(t.B.qa,t.B)&&t.qb(this.j.wa.zb))}}class p extends f{constructor(t){super(t),this.va=t.va,this.o=this.va.o,this.fb=new Ja}update(){super.update();const t=this.La();this.C()?(this.W=B(1-Ca(this.fb)),t&&(this.g=this.g.ea(t.g,.1))):t&&la(this.g,this.size,t.g,t.size)&&(t.qb(this.va),this.s=0,this.fb.set(.4),setTimeout(()=>this.xa(),400))}}class A{constructor(){this.j={size:B(100,100),Jc:[],items:[],T:[],species:[],wa:{Oc:{name:"Meat",o:7,l:1,stack:64,X:"🍖"},zb:{name:"Blood",o:6,l:1,stack:64,X:"🩸"},hc:{name:"Butcher knife",type:"w",o:5,l:1,stack:8,qa:1,X:"🔪"},ac:{name:"Herb",type:"b",o:8,l:1,stack:64,Va:1,X:"🌿"},Qc:{name:"Blood wine",o:13,l:1,stack:64,vb:10,Ya:1,X:"🍷"},Nc:{name:"Meal",o:14,l:1,stack:8,vb:1,Ya:1,X:"🍲"}}},this.j.ya=(...t)=>this.ya(...t),this.j.N=(...t)=>this.N(...t),this.tb=[],this.$=0,this.Ga=B()}pc(){const t=this.j;this.$=new v({g:this.Ga.F(),j:t}),t.T.push(this.$)}N(t,i,s=0){t="string"==typeof t?this.j.wa[t]:t,i=s?i.add(B(r(-s,s),r(-s,s))):i.F(),(s=this.j).items.push(new p({va:t,g:i,s:1,j:s}))}ya(t,i){const s=this.j;s.T.push(new m({o:0,g:t,j:s,Da:i}))}bc(){const i=this.j,t=i.size;var s,a=i.species;for(this.Ga=i.size.scale(.5),s=100;s--;)a.push([]);for(s=20;s--;)for(a=2;a--;)this.ya(B(r(100),r(100)));const e=t=>this.Ga.add(ra(B(),r(2*k),t)),h=(this.N(i.wa.hc,e(10)),[20,50,r(20,50)].forEach(t=>this.N(i.wa.ac,e(t))),gc(t.F()),s=new kc(t),a=new kc(V),B());for(h.x=t.x;h.x--;)for(h.y=t.y;h.y--;){var n=r(),c=((b=.98<n)&&xa(h,V)&&(fc[(0|h.y)*V.x+h.x|0]=1),n=.5<n?1:ma(1,5),ma(4)),o=ma(2),b=b?ua():void 0;s.setData(h,new hc(n,c,o,b))}this.tb=[s,a],this.tb.forEach(s=>{s.canvas.width=s.size.x*s.u.x,s.canvas.height=s.size.y*s.u.y,s.zc=[K,hb,C,G],K=s.canvas,hb=s.context,C=s.size.scale(.5),G=s.u.x,ub();for(let i=s.size.x;i--;)for(let t=s.size.y;t--;)ic(s,B(i,t));wb(1),[K,hb,C,G]=s.zc})}}const T=window.Ta||24;let I,S=0,E=ma;const J=(t,i,s,a,e,h=T,n=T)=>{I.fillStyle="#"+t+i+s,I.fillRect(a,e,h,n)};let N;const D=window;let P=0;D.Ta=24;let F,U;(async()=>{Qa=B(24),fb(h,n,c,o,b,await t())})()}();