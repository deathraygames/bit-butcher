"use strict";const h=Math.PI,ca=t=>t<0?-t:t,da=(t,i)=>t<i?t:i,ha=(t,i)=>i<t?t:i,ia=(t,i=0,a=1)=>t<i?i:a<t?a:t,ja=(t,i=0,a=1)=>a-i?ia((t-i)/(a-i)):0,ka=(t,i=0,a=1)=>i+ia(t)*(a-i),la=(t,i,a,s)=>2*ca(t.x-a.x)<i.x+s.x&2*ca(t.y-a.y)<i.y+s.y,t=(t=1,i=0)=>i+(t-i)*Math.random(),v=(i=1,a=0)=>0|t(i,a),na=(i=1)=>0<i?ma(i*t(0/i,1)**.5):new y,ma=(i=1)=>oa(new y,t(2*h),i),pa=(i=new z,a=new z(0,0,0,1),s)=>s?i.na(a,t()):new z(t(i.r,a.r),t(i.j,a.j),t(i.b,a.b),t(i.a,a.a)),A=(t=0,i)=>null==t.x?new y(t,null==i?t:i):new y(t.x,t.y);function oa(t,i=0,a=1){return t.x=a*Math.sin(i),t.y=a*Math.cos(i),t}function qa(t,i){return(t.x-i.x)**2+(t.y-i.y)**2}function sa(t){var i=t.length();return 1<i?t.scale(1/i):t}function xa(t,i){return 0<=t.x&&0<=t.y&&t.x<i.x&&t.y<i.y}class y{constructor(t=0,i=0){this.x=t,this.y=i}G(){return new y(this.x,this.y)}add(t){return new y(this.x+t.x,this.y+t.y)}o(t){return new y(this.x-t.x,this.y-t.y)}multiply(t){return new y(this.x*t.x,this.y*t.y)}Ka(t){return new y(this.x/t.x,this.y/t.y)}scale(t){return new y(this.x*t,this.y*t)}length(){return(this.x**2+this.y**2)**.5}normalize(t=1){var i=this.length();return i?this.scale(t/i):new y(0,t)}angle(){return Math.atan2(this.x,this.y)}rotate(t){var i=Math.cos(t);return t=Math.sin(t),new y(this.x*i-this.y*t,this.x*t+this.y*i)}direction(){return ca(this.x)>ca(this.y)?this.x<0?3:1:this.y<0?2:0}floor(){return new y(Math.floor(this.x),Math.floor(this.y))}na(t,i){return this.add(t.o(this).scale(ia(i)))}toString(t=3){return`(${(this.x<0?"":" ")+this.x.toFixed(t)},${(this.y<0?"":" ")+this.y.toFixed(t)} )`}}function ya(t=0){var i=new z,a=(t,i,a)=>(a=(a%1+1)%1)<1/6?t+6*(i-t)*a:a<.5?i:a<2/3?t+(i-t)*(2/3-a)*6:t;return i.r=a(1.4-1,1,t+1/3),i.j=a(1.4-1,1,t),i.b=a(1.4-1,1,t-1/3),i.a=1,i}function za(t){return(255*t.r|0)+(255*t.j<<8)+(255*t.b<<16)+(255*t.a<<24)}class z{constructor(t=1,i=1,a=1,s=1){this.r=t,this.j=i,this.b=a,this.a=s}G(){return new z(this.r,this.j,this.b,this.a)}add(t){return new z(this.r+t.r,this.j+t.j,this.b+t.b,this.a+t.a)}o(t){return new z(this.r-t.r,this.j-t.j,this.b-t.b,this.a-t.a)}multiply(t){return new z(this.r*t.r,this.j*t.j,this.b*t.b,this.a*t.a)}Ka(t){return new z(this.r/t.r,this.j/t.j,this.b/t.b,this.a/t.a)}scale(t,i=t){return new z(this.r*t,this.j*t,this.b*t,this.a*i)}na(t,i){return this.add(t.o(this).scale(ia(i)))}toString(){return`rgb(${255*this.r|0},${255*this.j|0},${255*this.b|0},${this.a})`}}class Ea{constructor(t){this.time=null==t?void 0:Fa+t,this.setTime=t}set(t=0){this.time=Fa+t,this.setTime=t}active(){return Fa<=this.time}get(){return null!=this.time?Fa-this.time:0}toString(){}}let La=A(1920,1200),Ma=A(),Na=A(16),Oa=A(1),Pa=0,B=A(),H=ha(Na.x,Na.y);const Sa=1/60;let Ua=[],Va=[],Wa=0,Fa=0,Xa=0,Ya=0,Za=0,$a,ab;function bb(t,s,e,h,n,i){cb.onerror=cb.onload=()=>{ab=A(.3).Ka($a=A(cb.width,cb.height)),document.body.style="margin:0;overflow:hidden;background:#000;touch-action:none;user-select:none;-webkit-user-select:none;-moz-user-select:none",document.body.appendChild(L=document.createElement("canvas")),db=L.getContext("2d"),L.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",eb(),document.body.appendChild(M=document.createElement("canvas")),Q=M.getContext("2d"),M.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",t(),r()};const r=(t=0)=>{var i=t-Ya;for(Ya=t,Xa+=i/1e3,Za=da(Za+i,50),Ma.x?(M.width=L.width=Ma.x,M.height=L.height=Ma.y,t=innerWidth/innerHeight,i=L.width/L.height,L.style.width=M.style.width=t<i?"100%":"",L.style.height=M.style.height=t<i?"":"100%",hb&&(hb.style.width=L.style.width,hb.style.height=L.style.height)):(M.width=L.width=da(innerWidth,La.x),M.height=L.height=da(innerHeight,La.y)),ib=A(L.width,L.height),t=0,Za<0&&-9<Za&&(t=Za,Za=0);0<=Za;Za-=1e3/60)document.hasFocus()||(R=[[]]),jb(kb),lb(),s(),mb(),e(),nb();Za+=t,ob(),h(),Ua.sort((t,i)=>t.L-i.L);for(const a of Ua)a.P||a.T();n(),pb(),qb(),requestAnimationFrame(r)};i?cb.src=i:cb.onload()}function ob(){ib=A(L.width,L.height),db.imageSmoothingEnabled=!1;var t=L.width,i=L.height,a=B.x,s=B.y,e=H;S.viewport(0,0,hb.width=t,hb.height=i),S.clear(16384),S.bindTexture(3553,rb),S.useProgram(ub),vb=void 0,t=2*e/t,i=2*e/i,S.uniformMatrix4fv(S.getUniformLocation(ub,"m"),0,new Float32Array([t,0,0,0,0,i,0,0,1,1,-1,1,-1-t*a,-1-i*s,0,0]))}function mb(){Va=Ua.filter(t=>t.Ia);const a=t=>{if(!t.P){t.update();for(const i of t.children)a(i)}};for(const t of Ua)t.parent||a(t);Ua=Ua.filter(t=>!t.P),Fa=++Wa/60}function wb(t){if(!t.P){t.P=1,t.parent&&t.parent.removeChild(t);for(const i of t.children)wb(i,i.parent=0)}}function xb(t,i,a=A(),s=0){i.parent||t.children.includes(i),t.children.push(i),i.parent=t,i.Ra=a.G(),i.Qa=s}class yb{constructor(t=A(),i=Oa,a=-1,s=Na,e=0,h,n=0){this.h=t.G(),this.size=i,this.ja,this.v=a,this.l=s,this.angle=e,this.color=h,this.ba,this.i=1,this.ca=this.C=.99,this.m=0,this.wa=.8,this.R=1,this.L=n,this.g=new y,this.qa=0,this.Wa=Fa,this.children=[],this.V=1,Ua.push(this)}update(){var t=this.parent;if(t)this.h=this.Ra.multiply(A(t.D?-1:1,1)).rotate(-t.angle).add(t.h),this.angle=(t.D?-1:1)*this.Qa+t.angle;else if(this.g.x=ia(this.g.x,-1,1),this.g.y=ia(this.g.y,-1,1),t=this.h.G(),this.h.x+=this.g.x*=this.C,this.h.y+=this.g.y=this.C*this.g.y+Pa*this.R,this.angle+=this.qa*=this.ca,this.i){var i,a,s,e,h,n,r,o=this.g.y<0;if(this.S&&(i=this.S.g?this.S.g.x:0,this.g.x=i+(this.g.x-i)*this.wa,this.S=0),this.Ia)for(var c of Va)!this.Pa&!c.Pa||c.P||c.parent||c==this||la(this.h,this.size,c.h,c.size)&&(la(t,this.size,c.h,c.size)?(i=(a=(i=t.o(c.h)).length())<.01?ma(.001):i.scale(.001/a),this.g=this.g.add(i),c.i&&(c.g=c.g.o(i))):(i=this.size.add(c.size),a=2*(t.y-c.h.y)>i.y+Pa,s=2*ca(t.y-c.h.y)<i.y,e=2*ca(t.x-c.h.x)<i.x,!a&&!e&&s||(this.h.y=c.h.y+(i.y/2+.001)*(t.y-c.h.y<0?-1:1),c.S&&o||!c.i?(o&&(this.S=c),this.g.y*=-this.m):c.i&&(h=(this.i*this.g.y+c.i*c.g.y)/(this.i+c.i),n=c.g.y*(c.i-this.i)/(this.i+c.i)+2*this.g.y*this.i/(this.i+c.i),r=ha(this.m,c.m),this.g.y=ka(r,h,this.g.y*(this.i-c.i)/(this.i+c.i)+2*c.g.y*c.i/(this.i+c.i)),c.g.y=ka(r,h,n))),a||!s&&e||(this.h.x=c.h.x+(i.x/2+.001)*(t.x-c.h.x<0?-1:1),c.i?(i=(this.i*this.g.x+c.i*c.g.x)/(this.i+c.i),a=c.g.x*(c.i-this.i)/(this.i+c.i)+2*this.g.x*this.i/(this.i+c.i),s=ha(this.m,c.m),this.g.x=ka(s,i,this.g.x*(this.i-c.i)/(this.i+c.i)+2*c.g.x*c.i/(this.i+c.i)),c.g.x=ka(s,i,a)):this.g.x*=-this.m)));this.V&&zb(this.h,this.size,this)&&!zb(t,this.size,this)&&(c=zb(new y(this.h.x,t.y),this.size,this),!zb(new y(t.x,this.h.y),this.size,this)&&c||(this.S=o,this.g.y*=-this.m,(o=(t.y-this.size.y/2|0)-(t.y-this.size.y/2))<0&&o>this.C*this.g.y+Pa*this.R&&(this.g.y=this.C?(o-Pa*this.R)/this.C:0),this.h.y=t.y),c&&(this.h.x=t.x,this.g.x*=-this.m))}}T(){Ab(this.h,this.ja||this.size,this.v,this.l,this.color,this.angle,this.D,this.ba)}removeChild(t){t.parent==this&&this.children.includes(t),this.children.splice(this.children.indexOf(t),1),t.parent=0}toString(){}}const cb=new Image;let L,db,M,Q,ib=A();const jb=t=>t.add(A(.5)).o(ib.scale(.5)).multiply(A(1/H,-1/H)).add(B),Bb=t=>t.o(B).multiply(A(H,-H)).add(ib.scale(.5)).o(A(.5));function Ab(t,i=A(1),a=-1,s=Na,e=new z,h=0,n,r=new z(0,0,0,0)){var o,c,b;a<0||!cb.width?Cb(t.x,t.y,i.x,i.y,h,0,0,0,0,0,za(e)):(b=a%(o=$a.x/s.x|0)*(c=s.x/$a.x),a=(a/o|0)*(s=s.y/$a.y),Cb(t.x,t.y,n?-i.x:i.x,i.y,h,b+ab.x,a+ab.y,b-ab.x+c,a-ab.y+s,za(e),za(r)))}function Db(t,i=A(1),a){var s=Na;Ab(jb(t),i.scale(1/H),-1,s,a,void 0,0,0)}function Eb(t,i){var a=A(.055),s=db;t=Bb(t),a=a.scale(H),s.save(),s.translate(t.x+.5|0,t.y-.5|0),s.rotate(0),s.scale(a.x,a.y),i(s),s.restore()}function Fb(t,i,a=1,s=new z,e=new z(0,0,0),h="center"){Q.fillStyle=s,Q.lineWidth=4,Q.strokeStyle=e,Q.textAlign=h,Q.font=a+"px arial",Q.textBaseline="middle",Q.lineJoin="round",i=i.G(),(t+"").split("\n").forEach(t=>{Q.strokeText(t,i.x,i.y),Q.fillText(t,i.x,i.y),i.y+=a})}let Gb;function Hb(r,t,o){var c=.2*H|0;const b=r.context,l=(b.save(),b.imageSmoothingEnabled=!1,r.l),u=l.add(r.Rb).scale(c),d=r.image.width/r.l.x|0;t.split("\n").forEach((i,a)=>{var s=i.length*l.x*c/2|0;for(let t=i.length;t--;){((e=i[t].charCodeAt())<32||127<e)&&(e=127);var e=(h=r.$b+e-32)%d,h=h/d|0,n=o.add(A(t,a).multiply(u));b.drawImage(r.image,e*l.x,h*l.y,l.x,l.y,n.x-s,n.y,l.x*c,l.y*c)}}),b.restore()}function Ib(t,i,a){Hb(t,i,Bb(a).floor())}class Jb{constructor(){var t=A(8),i=A(0,1),a=Q;Gb||((Gb=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC"),this.image=Gb,this.l=t,this.Rb=i,this.$b=0,this.context=a}}const Kb=(t,i=0)=>R[i]&&1&R[i][t]?1:0;let kb=A(),Lb=0,Mb=0;const Nb=(t,i=0)=>Kb(t,i+1);let R=[[]];function nb(){for(const t of R)for(const i in t)t[i]&=1;Lb=0}onkeydown=t=>{t.repeat||(R[Mb=0][Ob(t.keyCode)]=3)},onkeyup=t=>{R[0][Ob(t.keyCode)]=4};const Ob=t=>87==t?38:83==t?40:65==t?37:68==t?39:t,Pb=(onmousedown=t=>{R[Mb=0][t.button]=3,onmousemove(t),t.button&&t.preventDefault()},onmouseup=t=>R[0][t.button]=2&R[0][t.button]|4,onmousemove=t=>{var i;return t=L?(i=L.getBoundingClientRect(),A(L.width,L.height).multiply(A(ja(t.x,i.left,i.right),ja(t.y,i.top,i.bottom)))):A(),kb=t},onwheel=t=>t.ctrlKey||(Lb=t.deltaY<0?-1:1),oncontextmenu=()=>!1,[]);function lb(){if(navigator.getGamepads&&document.hasFocus()){var i=navigator.getGamepads();for(let t=i.length;t--;){var a=i[t];const h=R[t+1]||(R[t+1]=[]),n=Pb[t]||(Pb[t]=[]);if(a){for(var s=t=>.3<t?ja(t,.3,.8):t<-.3?-ja(-t,.3,.8):0,e=0;e<a.axes.length-1;e+=2)n[e>>1]=sa(A(s(a.axes[e]),s(-a.axes[e+1])));for(s=a.buttons.length;s--;)e=a.buttons[s],h[s]=e.pressed?1+2*!Nb(s,t):4*Nb(s,t),Mb|=!t&&e.pressed;(a=A(Nb(15,t)-Nb(14,t),Nb(12,t)-Nb(13,t))).x**2+a.y**2&&(n[0]=sa(a))}}}}if(void 0!==window.ontouchstart){let a,s;ontouchstart=ontouchmove=ontouchend=t=>{t.button=0;var i=t.touches.length;return i?(s||Qb([Tb(...[0,s=1])]),t.x=t.touches[0].clientX,t.y=t.touches[0].clientY,(a?onmousemove:onmousedown)(t)):a&&onmouseup(t),a=i,!t.cancelable}}class Ub{constructor(t,i=30,a=.7){this.Vb=i,this.ac=a,this.Ca=t[1]||0,t[1]=0,this.hb=Tb(...t)}play(i,a=1,s=1,e=1){var h=0;if(i){if(h=this.Vb){var n=qa(B,i);if(h*h<n)return;a*=ja(n**.5,h,h*this.ac)}h=2*Bb(i).x/L.width-1}return Qb([this.hb],a,s+s*this.Ca*e*t(-1,1),h)}}let Vb;function Qb(t,i=1,a=1,s=0){var e,h;if((Vb=Vb||new(window.AudioContext||webkitAudioContext)).resume(),"running"==Vb.state)return e=Vb.createBuffer(t.length,t[0].length,44100),h=Vb.createBufferSource(),t.forEach((t,i)=>e.getChannelData(i).set(t)),h.buffer=e,h.playbackRate.value=a,h.loop=0,(t=Vb.createGain()).gain.value=.5*i,t.connect(Vb.destination),(window.StereoPannerNode?h.connect(new StereoPannerNode(Vb,{pan:ia(s,-1,1)})):h).connect(t),h.start(),h}function Tb(i=1,a=.05,s=220,e=0,n=0,r=.1,o=0,c=1,b=0,l=0,u=0,d=0,y=0,x=0,f=0,g=0,v=0,m=1,w=0,A=0){let p=2*h,z=b*=500*p/44100/44100,M=[],S=(a=s*=(1+a*t(-1,1))*p/44100,0),U=0,L=0,B=1,T=0,C=0,E=0,F,k;for(l*=500*p/44100**3,f*=p/44100,u*=p/44100,d*=44100,y=44100*y|0,k=(e=44100*e+9)+(w*=44100)+(n*=44100)+(r*=44100)+(v*=44100)|0;L<k;M[L++]=E)++C%(100*g|0)||(E=o?1<o?2<o?3<o?Math.sin((S%p)**3):ha(da(Math.tan(S),1),-1):1-(2*S/p%2+2)%2:1-4*ca(Math.round(S/p)-S/p):Math.sin(S),E=(y?1-A+A*Math.sin(p*L/y):1)*(E<0?-1:1)*(E<0?-E:E)**c*i*.5*(L<e?L/e:L<e+w?1-(L-e)/w*(1-m):L<e+w+n?m:L<k-v?(k-L-v)/r*m:0),E=v?E/2+(v>L?0:(L<k-v?1:(k-L)/v)*M[L-v|0]/2):E),F=(s+=b+=l)*Math.cos(f*U++),S+=F-F*x*(1-1e9*(Math.sin(L)+1)%2),B&&++B>d&&(s+=u,a+=u,B=0),!y||++T%y||(s=a,b=z,B=B||1);return M}let Wb=[],T=A();function Xb(t){for(T=t,t=(Wb=[]).length=ca(T.x*T.y);t--;)Wb[t]=0}function zb(t,i=A(),a){var s=ha(t.x-i.x/2|0,0),e=ha(t.y-i.y/2|0,0),h=da(t.x+i.x/2,T.x);for(t=da(t.y+i.y/2,T.y);e<t;++e)for(i=s;i<h;++i){var n=Wb[e*T.x+i];if(n&&(!a||0<n))return 1}}class Yb{constructor(t,i=0,a=0,s=new z){this.Ea=t,this.direction=i,this.D=a,this.color=s}clear(){this.Ea=this.direction=this.D=0,color=new z}}function Zb(t,i){var a=i.floor().add(t.h).add(A(.5));$b(t,a,t=>t.clearRect(-.5,-.5,1,1)),null!=(i=t.getData(i)).Ea&&Ab(a,A(1),i.Ea,t.l,i.color,i.direction*h/2,i.D)}function $b(t,i,a){var s=A(1);const e=t.context;e.save(),i=i.o(t.h).multiply(t.l),s=s.multiply(t.l),e.translate(i.x,t.canvas.height-i.y),e.rotate(0),e.scale(s.x,s.y),a(e),e.restore()}class ac extends yb{constructor(t=T){var i=A(1);for(super(A(),t,-1,Na,0,void 0,0),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.scale=i,this.Db,this.data=[],t=this.size,t=ca(t.x*t.y);t--;)this.data.push(new Yb)}setData(t,i,a){xa(t,this.size)&&(this.data[(0|t.y)*this.size.x+t.x|0]=i,a&&Zb(this,t))}getData(t){return xa(t,this.size)&&this.data[(0|t.y)*this.size.x+t.x|0]}update(){}T(){var t=Bb(this.h.add(A(0,this.size.y*this.scale.y)));(this.Db?Q:db).drawImage(this.canvas,t.x,t.y,H*this.size.x*this.scale.x,H*this.size.y*this.scale.y)}}function bc(i){var a=null!=i.ta.x?new y(t(-.5,.5),t(-.5,.5)).multiply(i.ta).rotate(i.angle):na(.5*i.ta),a=new cc(i.h.add(a),i.v,i.l,i.angle+t(i.Ua,-i.Ua));const s=i.Ca;var e=(o=i=>i+i*t(s,-s))(i.Tb),h=o(i.Da),n=o(i.Yb),r=o(i.speed),o=o(i.Za)*(2*(0|t(2))-1);const c=t(i.La,-i.La),b=pa(i.lb,i.mb,i.Va),l=pa(i.jb,i.kb,i.Va);a.ga=b,a.fa=l.o(b),a.g=oa(new y,i.angle+c,r),a.qa=o,a.Ib=e,a.Da=h,a.Zb=n-h,a.va=i.va,a.C=i.C,a.ca=i.ca,a.m=i.m,a.wa=i.wa,a.R=i.R,a.V=i.V,a.aa=i.aa,a.L=i.L,a.X=i.X,a.D=t()<.5,a.Ja=i.fc,i.Sb&&i.Sb(a)}class dc extends yb{constructor(t,i,a=0,s=0,e=100,n=h,r=-1,o=Na,c=new z,b=new z,l=new z(1,1,1,0),u=new z(1,1,1,0),d=.5,x=.1,f=1,g=.1,v=.05,m=1,w=1,A=0,p=h,M=.1,S=.2,U,L,B=1,T=L?1e9:0){super(t,new y,r,o,i,void 0,T),this.ta=a,this.Ma=s,this.ka=e,this.La=n,this.lb=c,this.mb=b,this.jb=l,this.kb=u,this.Va=B,this.Tb=d,this.Da=x,this.Yb=f,this.speed=g,this.Za=v,this.C=m,this.ca=w,this.R=A,this.Ua=p,this.va=M,this.Ca=S,this.V=U,this.aa=L,this.W=this.X=0}update(){if(this.parent&&super.update(),!this.Ma||Fa-this.Wa<=this.Ma){if(+this.ka){var t=1/this.ka;for(this.W+=Sa;0<this.W;this.W-=t)bc(this)}}else wb(this)}T(){}}class cc extends yb{constructor(t,i,a,s){super(t,new y,i,a,s)}T(){var t=da((Fa-this.Wa)/this.Ib,1),i=this.Da+t*this.Zb,i=new y(i,i),a=this.va/2,a=new z(this.ga.r+t*this.fa.r,this.ga.j+t*this.fa.j,this.ga.b+t*this.fa.b,(this.ga.a+t*this.fa.a)*(t<a?t/a:1-a<t?(1-t)/a:1));if(this.aa&&(vb=1),this.X){var s=this.g.length();const e=this.g.scale(1/s);s*=this.X,i.y=ha(i.x,s),this.angle=e.angle(),Ab(this.h.add(e.multiply(A(0,-s/2))),i,this.v,this.l,a,this.angle,this.D)}else Ab(this.h,i,this.v,this.l,a,this.angle,this.D);this.aa&&(vb=void 0),1==t&&(this.color=a,this.size=i,this.Ja&&this.Ja(this),this.P=1)}}let ec=[],fc;function pb(){var t,i;ec.length&&(t=ec[0],i=Xa-fc,fc?5<i?ec.shift(fc=0):t.T():fc=Xa)}let hb,S,rb,ub,U,Z,gc,hc,vb;function eb(){hb=document.createElement("canvas"),S=hb.getContext("webgl",{antialias:!1}),hb.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",rb=ic(),document.body.appendChild(hb),ub=jc();var t=new ArrayBuffer(9437184);kc(t.byteLength),U=new Float32Array(t),Z=new Uint32Array(t);let h=gc=0;(t=(t,i,a,s,e=0)=>{t=S.getAttribLocation(ub,t),S.enableVertexAttribArray(t),S.vertexAttribPointer(t,s,i,e,24,h),h+=s*a})("p",5126,4,2),t("t",5126,4,2),t("c",5121,1,4,1),t("a",5121,1,4,1)}function lc(t,i){return i=S.createShader(i),S.shaderSource(i,t),S.compileShader(i),i}function jc(){var t=S.createProgram();return S.attachShader(t,lc("precision highp float;uniform mat4 m;attribute vec2 p,t;attribute vec4 c,a;varying vec2 v;varying vec4 d,e;void main(){gl_Position=m*vec4(p,1,1);v=t;d=c;e=a;}",35633)),S.attachShader(t,lc("precision highp float;varying vec2 v;varying vec4 d,e;uniform sampler2D s;void main(){gl_FragColor=texture2D(s,v)*d+e;}",35632)),S.linkProgram(t),t}function kc(t){var i=S.createBuffer();S.bindBuffer(34962,i),S.bufferData(34962,t,35048)}function ic(){var t,i=cb;if(i&&i.width)return t=S.createTexture(),S.bindTexture(3553,t),S.texImage2D(3553,0,6408,6408,5121,i),S.texParameteri(3553,10241,9728),S.texParameteri(3553,10240,9728),S.texParameteri(3553,10242,33071),S.texParameteri(3553,10243,33071),t}function mc(){var t;gc&&(t=hc?1:771,S.blendFuncSeparate(770,t,1,t),S.enable(3042),S.bufferSubData(34962,0,U.subarray(0,36*gc)),S.drawArrays(4,0,6*gc),gc=0,hc=vb)}function qb(t){var i=db;(gc||t)&&(mc(),t&&i.drawImage(hb,0,0))}function Cb(t,i,a,s,e,h,n,r,o,c=4294967295,b=0){65536!=gc&&hc==vb||mc();var l=Math.cos(e)/2,u=Math.sin(e)/2;e=l*a,l*=s,a*=u,s*=u,u=36*gc++,U[u++]=t-e-s,U[u++]=i-l+a,U[u++]=h,U[u++]=o,Z[u++]=c,Z[u++]=b,U[u++]=t+e+s,U[u++]=i+l-a,U[u++]=r,U[u++]=n,Z[u++]=c,Z[u++]=b,U[u++]=t-e+s,U[u++]=i+l+a,U[u++]=h,U[u++]=n,Z[u++]=c,Z[u++]=b,U[u++]=t-e-s,U[u++]=i-l+a,U[u++]=h,U[u++]=o,Z[u++]=c,Z[u++]=b,U[u++]=t+e-s,U[u++]=i-l-a,U[u++]=r,U[u++]=o,Z[u++]=c,Z[u++]=b,U[u++]=t+e+s,U[u++]=i+l-a,U[u++]=r,U[u++]=n,Z[u++]=c,Z[+u]=b}!function(){function S(t){return Math.max(Math.min(Math.round(t),24),0)}function U(t){t.oa=S(t.x+t.M/2),t.pa=S(t.y+t.N/2),t.Na=S(t.x+t.M),t.la=S(t.y+t.N)}function C(t,i,a,s,e,h,n){var r=Math.floor((24-i)/2*n),o=24-r;return a-=r/2,[t,i,t+s,i,(e=Math.max(0,t+e+e*n))+h,a,t+s,o,t,o,e,a]}function i(t,s,i,a=4,e=0){Bb(s),t=i.ab;var h=i.$a,n=i.vb,r=i.ob,o=i.Ab,c=i.sb,b=i.qb,l=i.rb,u=i.pb,d=i.Qb,y=i.Ob,x=i.Pb,f=i.wb,g=i.Fb,v=i.Hb,m=2<=a&&a<=6,w=[0,-.5,-1,-.5,0,.5,1,.5][a],A=[.5,.75,1,.75,.5,.25,0,.25][a],p=(a={x:(24-o)*A,y:i.zb,M:o,N:i.yb},(i.gb+i.eb)/2),z=(i={x:(1-A+1)/3*(24-p),y:i.fb,M:p,N:i.cb},U(a),U(i),S(i.la+(24-i.la)/2)),M=(Math.sin(e)+1)/2;e=C(i.x,i.la,z,v,f*=w,g,1-M),g=C(i.Na-v,i.la,z,v,f,g,M),v=[a.oa-o/4,a.pa,a.oa+o/4,a.pa,i.oa+p/4,i.pa-1,i.oa-p/4,i.pa-1],c={x:(A=a.x+o*A)+(p=Math.max(1,u/2)),y:(u={x:A-p-c,y:a.y+l,M:c,N:b}).y,M:c,N:b},l={x:b=Math.max(A-d/2,a.x),y:a.y+l+x,M:Math.min(b+d,a.Na)-b,N:y},d=(i,n)=>{Eb(s,t=>{var a=t,s=-.5,e=-.5,h=i,t=n;a.fillStyle=E(t),a.beginPath(),h.forEach((t,i)=>{1!=i%2&&a[0===i?"moveTo":"lineTo"](Math.round(24*s+t),Math.round(24*e+h[i+1]))}),a.closePath(),a.fill()})},y=(i,a)=>{Eb(s,t=>{t.fillStyle=E(a),t.fillRect(Math.round(-12+i.x),Math.round(-12+i.y),Math.round(i.M),Math.round(i.N))})},m?(y(i,t),d(v,t),d(e,t),d(g,t),y(a,n),u.x>=a.x&&y(u,r),c.x<=a.x+o&&y(c,r),y(l,[0,0,0])):(y(a,h),d(v,t),d(e,t),d(g,t),y(i,t))}function E(t){return t?`rgb(${Math.max(0,Math.min(255,t[0]))},${Math.max(0,Math.min(255,t[1]))},`+Math.max(0,Math.min(255,t[2])):"#fff"}function s(i,a,s){const e=m*++p;k(i,a,s,e,0),[6,5,4,3,3,2,2,2,1,1,1,1,1].forEach(t=>{k(F(i,6),F(a,6),F(s,6),e+F(m-t),0+F(m-t),t,t)})}function a(){(Z=P.hc=new g).Bb(),B=T.scale(.5),H=42,Pa=0,(N=new dc(A(10,12),0,1,0,200,h,0,A(24),new z(1,1,1),new z(0,0,0),new z(1,1,1,0),new z(0,0,0,0),2,.2,.2,.1,.05,.99,1,.5,h,.05,.5,1,1)).m=.3,N.X=2}function e(){var t=Z.K;t!==P.K&&(P.K=t),R[0]&&4&R[0][13]&&(0===j||2===j)&&(j=1,Z.Mb()),t&&(B=B.na(t.h,.1),t.I()?j=2:24<=((t=t.tb())?t.B:0)&&(j=3,l.ea(3))),H=ia(H*(1-Lb/10),1,1e3)}function n(){}function r(){}function o(){const a=Z.K,s=new z,t=M.width/2,i=M.height/2,e=new Jb;var h;2===j?(Fb("YOU DIED",A(t,i-90),90,new z(1,0,0)),Fb("Press Enter to restart",A(t,i),40,new z(1,.5,.5))):0===j?(Ib(e,"BIT BUTCHER",B.add(A(0,3))),Fb("Press Enter to start",A(t,i),40,s)):(1===j||3===j&&a)&&(Fb(a.A.map(t=>t?(t.name||" ")+" x"+t.B:" ").map((t,i)=>i+": "+(a.ma===i?`[ ${t.toUpperCase()} equipped ]`:`[ ${t} ]`)).concat(["0: [Hands]","E: Action"]).join("    "),A(t,M.height-40),20,s),l.forEach((t,i)=>Fb(`[${t[1]?"X":" "}] `+t[0],A(M.width-260,100+30*i),18,t[1]?new z(.4,1,.4,.5):s,new z(0,0,0,t[1]?.5:1),"left")),h=85<a.F?0:1,h=new z(1,h,h,.8),Db(A(t,40),A(Math.max(0,100-a.F)/100*500,2),h),Fb("Age: "+Math.ceil(a.F),A(t,40),20,h),3===j&&(Ib(e,"YOU WIN",B.add(A(0,5))),Fb("Refresh page to play again",A(t,i-80),40,s)))}let c;const b=(t,i)=>{if(!Ub)throw Error("no Sound");if(!(c=c||{hit:new Ub([,,183,.03,.02,.09,,1.49,-1.8,,,,-.01,1.8,-1,.1,,.36,.08,.25]),click:new Ub([.5,.5]),attack:new Ub([,,493,.01,.09,0,4,1.14,,,,,,,,.1,,.1,.01])}))throw Error("no sounds");c[t]?c[t].play(i):console.warn("No sound",t,"in",c)};let l=[["Move (W,A,S,D or Arrows)"],["Equip knife (Press 1)"],["Stab animal"],["Collect 24 meat"]],u=l;u.ea=t=>{u[t][1]=(u[t][1]||0)+1};class d extends yb{constructor(t={}){var{h:t=A(),size:i=A(1),v:a=1,l:s,angle:e,u:n,ia:r=0,name:o=v(999)}=t;super(t,i,a,s,e),this.name=o,this.u=n,this.facing=h,this.direction=4,this.O=new Ea,this.H=0,this.ia=r,this.ja=A(1)}setDirection(){this.direction=Math.round(this.facing<0?4+4*(h+this.facing)/h:4*this.facing/h)%8}ha(t){if(this.I()||this.O.active())return 0;this.O.set(1);for(const i of this.children)i.O&&i.O.set(1);return(t=ha(this.H-t,0))||this.ya(),this.H-(this.H=t)}I(){return!this.H}ya(){wb(this)}update(){var t;super.update(),this.setDirection(),this.I()||null==this.O.time?this.ba=new z(0,0,0,0):(t=.5*ja(this.O.get(),.15,0),this.ba=new z(t,.1,.1,.5))}Oa(){return this.u.da.find(t=>t.Eb&&!t.I())}}class y extends d{constructor(i){var a,s,e,n,r,o,c,b,l,u,d,y,x,f,g,m,w,p,M;super(i),this.$=new Ea,this.za=new Ea,this.Ba=new Ea(t(10)),this.Ga=new Ea,this.ra=new Ea,this.color=ya(t()),(i=i.species)||(i=(s=this.color)?255*s.r:v(180)+20,a=s?255*s.j:v(180)+20,s=s?255*s.b:v(180)+20,e=v(6,24*.6),n=v(6,24*.6),r=v(5,24*.6),o=v(0,24-r-2),c=v(6,12),b=v(8,24*.6),l=v(0,24-c-24*.2),u=v(1,3),d=v(1,3),y=v(2,c-4),x=v(1,.5*b),f=v(3,b-4),g=v(1,2),m=v(2,c-y-g),w=v(-4,-1),p=v(-4,3),M=Math.min(e/2,v(1,6)),i={ab:[i-20,a-20,s-10],$a:[i-40,a-40,s-20],vb:[i,a,s],ob:0===v(2)?[0,0,0]:[200,200,200],Ab:b,yb:c,zb:l,gb:e,eb:n,cb:r,fb:o,sb:u,qb:d,rb:y,pb:x,Qb:f,Ob:g,Pb:m,wb:w,cc:p,Fb:2,Hb:M}),this.species=i,this.L=10,this.Z=0,this.H=2,this.Sa=.1,this.Y=1,this.Lb=7,this.F=0,this.Ta=1/0,this.Ya=!1,this.bc=0,this.J=A(),this.Ia=1,this.Pa=0,this.V=1,this.max=A(window.Fa),this.head=A(.5,.3),this.body=A(.6,.3),this.A=[,,,,,,,,,,],this.ma=-1,this.U=this.s=null,xb(this,this.sa=new dc(A(),0,0,0,0,h,void 0,void 0,new z(1,.2,.2),new z(.9,.2,.2),new z(1,.3,.3),new z(.9,.3,.3),5,.2,.1,.07,.1,.95,.95,1,h,.01,.2,1),A(),0),this.sa.m=.5}ha(t,i){super.ha(t,i)<=0||(b("hit",this.h),this.Ha(),this.za.time=void 0)}Ha(){this.ra.active()||(this.ra.set(.2),this.sa.ka=100)}ib(){this.ra.active()||(this.sa.ka=0)}ub(a){var t=this.A.findIndex((t,i)=>t&&t.name===a&&(t.B||0)<(t.stack||0)&&0<i);return-1!==t?t:this.A.findIndex((t,i)=>!t&&0<i)}tb(){var t=this.A.findIndex(t=>t&&"Meat"===t.name);return t<0?null:this.A[t]}Aa(t){var i,a;"number"!=typeof i&&(i=this.ub(t.name)),!t||i<1||9<i||((a=this.A[i])&&a.name===t.name&&(a.B||0)<(a.stack||0)?a.B=(a.B||0)+1:this.A[i]=t)}throw(){}nb(t){t<-1||9<t||(this.ma=t,(t=this.A[this.ma])?("Butcher knife"===t.name&&l.ea(1),this.s&&(this.s.ja=A()),t.ua||(t.ua=new d(t),xb(this,t.ua,A(-.2,.2))),this.s=t.ua):this.s=null)}attack(){b("attack",this.h)}action(){if(!this.$.active()){var t=this.A[this.ma];if(this.$.set(.25),t&&"w"===t.type)return this.attack()}}Ub(){var i;this.Ba.active()||(this.Ba.set(t(2,20)),i=this.u.size.scale(.5),this.U=(30<qa(this.h,i)**.5?i:this.h).add(A(t(-10,10),t(-10,10))),this.Y=t(1))}Kb(){var i,a;this.za.active()||!this.Ya||!(i=this.u.da.find(t=>t.Xb&&!t.I()))||(a=qa(i.h,this.h)**.5)>this.Lb||(this.za.set((a=a<6)?.5:t(.5,2)),a&&(i=this.h.o(i.h).normalize(7),this.U=this.h.add(i),this.Y=1))}xb(){this.Ga.active()||(this.Ga.set(6),this.F+=1,this.Cb()&&this.ha(1,this))}Cb(){return this.F>this.Ta}Jb(){var t,i;this.I()||((i=(t=this.J.G()).x||t.y)&&(this.Ba.set(60),this.U=null,this.Y=1),this.Kb(),this.Ub(),this.U&&!i&&2<qa(this.h,this.U)**.5&&(this.g=this.g.na(this.U.o(this.h),.5)),t=t.scale(.04*this.Y),this.g=this.g.add(t),t=this.Sa*this.Y,this.g.x=ia(this.g.x,-t,t),this.g.y=ia(this.g.y,-t,t),t=this.g.length(),this.Z+=.5*t,this.Z=.01<t?(this.Z%1+1)%1:0,this.facing=this.g.angle(),this.xb())}update(){this.Jb(),this.ib();const t=A(.9999);0===this.J.x&&(t.x=.9),0===this.J.y&&(t.y=.9),this.g=this.g.multiply(t),super.update()}T(){let t=this.h;t=t.add(A(0,.05*Math.sin(this.Z*h))),this.color.add(this.ba),i(db,t,this.species,this.direction,this.bc)}}class x extends y{constructor(t){super(t),this.Eb=!0,this.H=5,this.Sa=.2,this.L=10,this.F=18,this.Ta=100}update(){[48,49,50,51,52,53,54,55,56,57].forEach(t=>{Kb(t)&&this.nb(t-48)}),(Kb(81)||Nb(1))&&this.throw(),(Kb(69)||Kb(0)||Nb(0))&&this.action(),((this.J=Mb?Pb[0]&&Pb[0][0]||A():A(Kb(39)-Kb(37),Kb(38)-Kb(40)))&&this.J.x||this.J.y)&&l.ea(0),this.Xb=!0,super.update();const t=this.s;var i;t&&(i=this.$.active()?1:.7,t.ja=A(this.$.active()?1.2:1),t.Ra=oa(A(),this.facing,i),t.Qa=this.facing+1.2*h,t.L=t.h.y<this.h.y?11:9)}}class f extends y{constructor(t){super(t),this.Ya=!0}ya(){b("hit",this.h),this.H=0;const t=this.Oa();t&&t.Aa(this.u.xa.Nb),this.angle=h,this.Ha(),setTimeout(()=>super.ya(),4e3)}update(){super.update();const t=this.Oa();!this.I()&&t&&t.s&&t.s.ia&&la(this.h,this.size,t.s.h,t.s.size)&&(l.ea(2),this.ha(t.s.ia,t.s)&&t.Aa(this.u.xa.bb))}}class g{constructor(){this.u={seed:123,size:A(100,100),ec:[],items:[],da:[],species:[],xa:{Nb:{name:"Meat",v:7,B:1,stack:64},bb:{name:"Blood",v:6,B:1,stack:64},Gb:{name:"Butcher knife",type:"w",v:5,B:1,stack:1,ia:1},dc:{name:"Bait",type:"b",v:0,B:1,stack:64}}},this.Xa=[],this.K=0}Mb(){const t=this.u;this.K=new x({h:t.size.scale(.5),u:t}),this.K.Aa(t.xa.Gb),t.da.push(this.K)}Bb(){var i=this.u;const a=i.size;for(var s=i.species,e=i.da,h=100;h--;)s.push([]);for(h=20;h--;)for(s=2;s--;)e.push(new f({v:0,h:A(t(0,100),t(0,100)),u:i}));for(Xb(a.G()),i=new ac(a),e=new ac(T),(h=A()).x=a.x;h.x--;)for(h.y=a.y;h.y--;){var n=t(),r=((s=.98<n)&&xa(h,T)&&(Wb[(0|h.y)*T.x+h.x|0]=1),n=.5<n?1:v(1,5),v(4)),o=v(2),s=s?pa():void 0;i.setData(h,new Yb(n,r,o,s))}this.Xa=[i,e],this.Xa.forEach(a=>{a.canvas.width=a.size.x*a.l.x,a.canvas.height=a.size.y*a.l.y,a.Wb=[L,db,B,H],L=a.canvas,db=a.context,B=a.size.scale(.5),H=a.l.x,ob();for(let i=a.size.x;i--;)for(let t=a.size.y;t--;)Zb(a,A(i,t));qb(1),[L,db,B,H]=a.Wb})}}const m=window.Fa||24;let w,p=0,F=v;const k=(t,i,a,s,e,h=m,n=m)=>{w.fillStyle="#"+t+i+a,w.fillRect(s,e,h,n)};let N;const P=window;let j=0;P.Fa=24;let Z;(async()=>{var i;Na=A(24),bb(a,e,n,r,o,await new Promise(a=>{const t=new Image;t.onload=()=>{var t=document.createElement("canvas"),i=(document.body.appendChild(t),w=t.getContext("2d"),t.style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",w.drawImage(cb,1e3,1e3),k("f",0,0,0,0,12,12),k("f","f",0,12,12,12,12),s(2,4,3),s(2,4,2),s(3,4,3),s(4,3,3),w.fillStyle="#fff",w.font="20px serif",m*++p);return w.fillText("🔪🩸🍖",i-1,19),w.fillText("🦀🍖🥩🍗💀🔪",0,44),t=t.toDataURL(),a(t)},i?t.src=i:t.onload()}))})()}();